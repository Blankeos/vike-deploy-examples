import{d as k,$ as A,a as E,k as j,g as x,t as P,b as v,e as g,c as U,m as $,j as z,r as O,i as R,o as D}from"../chunks/chunk-CA_lTzOx.js";import"../chunks/chunk-NKvcOzAe.js";var H=(e,t,r={})=>{let a=`${e}=${t}`;if(e.startsWith("__Secure-")&&!r.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(e.startsWith("__Host-")){if(!r.secure)throw new Error("__Host- Cookie must have Secure attributes");if(r.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(r.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(r&&typeof r.maxAge=="number"&&r.maxAge>=0){if(r.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");a+=`; Max-Age=${r.maxAge|0}`}if(r.domain&&r.prefix!=="host"&&(a+=`; Domain=${r.domain}`),r.path&&(a+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");a+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite&&(a+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.priority&&(a+=`; Priority=${r.priority.charAt(0).toUpperCase()+r.priority.slice(1)}`),r.partitioned){if(!r.secure)throw new Error("Partitioned Cookie must have Secure attributes");a+="; Partitioned"}return a},q=(e,t,r)=>(t=encodeURIComponent(t),H(e,t,r)),L=(e,t)=>(e=e.replace(/\/+$/,""),e=e+"/",t=t.replace(/^\/+/,""),e+t),w=(e,t)=>{for(const[r,a]of Object.entries(t)){const i=new RegExp("/:"+r+"(?:{[^/]+})?\\??");e=e.replace(i,a?`/${a}`:"")}return e},B=e=>{const t=new URLSearchParams;for(const[r,a]of Object.entries(e))if(a!==void 0)if(Array.isArray(a))for(const i of a)t.append(r,i);else t.set(r,a);return t},M=(e,t)=>{switch(t){case"ws":return e.replace(/^http/,"ws");case"http":return e.replace(/^ws/,"http")}},_=e=>/^https?:\/\/[^\/]+?\/index(?=\?|$)/.test(e)?e.replace(/\/index(?=\?|$)/,"/"):e.replace(/\/index(?=\?|$)/,"");function y(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function C(e,t){if(!y(e)&&!y(t))return t;const r={...e};for(const a in t){const i=t[a];y(r[a])&&y(i)?r[a]=C(r[a],i):r[a]=i}return r}var T=(e,t)=>new Proxy(()=>{},{get(a,i){if(!(typeof i!="string"||i==="then"))return T(e,[...t,i])},apply(a,i,s){return e({path:t,args:s})}}),N=class{url;method;buildSearchParams;queryParams=void 0;pathParams={};rBody;cType=void 0;constructor(e,t,r){this.url=e,this.method=t,this.buildSearchParams=r.buildSearchParams}fetch=async(e,t)=>{if(e){if(e.query&&(this.queryParams=this.buildSearchParams(e.query)),e.form){const o=new FormData;for(const[u,c]of Object.entries(e.form))if(Array.isArray(c))for(const h of c)o.append(u,h);else o.append(u,c);this.rBody=o}e.json&&(this.rBody=JSON.stringify(e.json),this.cType="application/json"),e.param&&(this.pathParams=e.param)}let r=this.method.toUpperCase();const a={...e?.header,...typeof t?.headers=="function"?await t.headers():t?.headers};if(e?.cookie){const o=[];for(const[u,c]of Object.entries(e.cookie))o.push(q(u,c,{path:"/"}));a.Cookie=o.join(",")}this.cType&&(a["Content-Type"]=this.cType);const i=new Headers(a??void 0);let s=this.url;s=_(s),s=w(s,this.pathParams),this.queryParams&&(s=s+"?"+this.queryParams.toString()),r=this.method.toUpperCase();const n=!(r==="GET"||r==="HEAD");return(t?.fetch||fetch)(s,{body:n?this.rBody:void 0,method:r,headers:i,...t?.init})}},W=(e,t)=>T(function r(a){const i=t?.buildSearchParams??B,s=[...a.path],n=s.slice(-3).reverse();if(n[0]==="toString")return n[1]==="name"?n[2]||"":r.toString();if(n[0]==="valueOf")return n[1]==="name"?n[2]||"":r;let o="";if(/^\$/.test(n[0])){const l=s.pop();l&&(o=l.replace(/^\$/,""))}const u=s.join("/"),c=L(e,u);if(o==="url"){let l=c;return a.args[0]&&(a.args[0].param&&(l=w(c,a.args[0].param)),a.args[0].query&&(l=l+"?"+i(a.args[0].query).toString())),l=_(l),new URL(l)}if(o==="ws"){const l=M(a.args[0]&&a.args[0].param?w(c,a.args[0].param):c,"ws"),f=new URL(l),m=a.args[0]?.query;return m&&Object.entries(m).forEach(([d,p])=>{Array.isArray(p)?p.forEach(S=>f.searchParams.append(d,S)):f.searchParams.set(d,p)}),((...d)=>t?.webSocket!==void 0&&typeof t.webSocket=="function"?t.webSocket(...d):new WebSocket(...d))(f.toString())}const h=new N(c,o,{buildSearchParams:i});if(o){t??={};const l=C(t,{...a.args[1]});return h.fetch(a.args[0],l)}return h},[]),I=class extends Error{res;status;constructor(e=500,t){super(t?.message,{cause:t?.cause}),this.res=t?.res,this.status=e}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};function V(e){if(e?.length)return e.map(t=>`${t.path.join(".")}: ${t.message}`).join(", ")}const J=(e,t)=>W(`${e}/api`,{headers:{},fetch:async(r,a)=>{const i=await fetch(r,{...a,cache:"no-store"});if(!i.ok){const s=await i.json(),n=s?.error?.name==="ZodError"?V(s.error.issues):s.error.message;throw new I(i.status,{message:n||i.statusText,cause:s.error.cause,res:i})}for(const[s,n]of i.headers)s.toLowerCase();return i}}),Z=typeof window>"u"?"":window?.location?.origin??"",F=J(Z);var G=P("<div><h1>My Vike + Solid app</h1>This page is:<ul><li>Rendered to HTML.</li><li>Interactive. <!$><!/></li><li>Working fetch: <!$><!/>"),K=P("<button type=button>Counter <!$><!/>");function Q(){A({title:E("Home")});const[e]=j(async()=>(await F.todos.$get()).json());return(()=>{var t=x(G),r=t.firstChild,a=r.nextSibling,i=a.nextSibling,s=i.firstChild,n=s.nextSibling,o=n.firstChild,u=o.nextSibling,[c,h]=v(u.nextSibling),l=n.nextSibling,f=l.firstChild,m=f.nextSibling,[b,d]=v(m.nextSibling);return g(n,U(X,{}),c,h),g(l,(()=>{var p=$(()=>!!e.loading);return()=>p()?"Loading...":(()=>{var S=$(()=>!!e.error);return()=>S()?`Error: ${e.error.message}`:JSON.stringify(e())})()})(),b,d),t})()}function X(){const[e,t]=z(0);return(()=>{var r=x(K),a=r.firstChild,i=a.nextSibling,[s,n]=v(i.nextSibling);return r.$$click=()=>t(o=>o+1),g(r,e,s,n),O(),r})()}k(["click"]);const Y=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),te={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},guardEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-solid/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:D}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/index/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Y}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-solid/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+Layout.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:R}]}};export{te as configValuesSerialized};
