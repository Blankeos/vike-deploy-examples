function K(e){return Array.from(new Set(e))}function $(e,n){const t=Y();return t[e]??(t[e]=n)}function Y(){var e;return globalThis._vike??(globalThis._vike={}),(e=globalThis._vike).globals??(e.globals={}),globalThis._vike.globals}const u=new Proxy({},{get:(e,n)=>t=>n==="code"?`\`${t}\``:n==="string"?`'${t}'`:t}),A="0.4.249";let y;y??(y=B());function B(){return $("utils/assertSingleInstance.ts",{instances:[],alreadyLogged:new Set})}function v(){return y??(y=B()),y}const Z="Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict",V="Client runtime loaded twice https://vike.dev/client-runtime-duplicated";function D(){const e=v();{const n=K(e.instances);m(n.length<=1,`vike@${u.bold(n[0])} and vike@${u.bold(n[1])} loaded which is highly discouraged, see ${u.underline("https://vike.dev/warning/version-mismatch")}`,{onlyOnce:!0,showStackTrace:!1})}e.checkSingleInstance&&e.instances.length>1&&m(!1,V,{onlyOnce:!0,showStackTrace:!0})}function We(e){const n=v();m(n.isClientRouting!==!1,Z,{onlyOnce:!0,showStackTrace:!0}),m(n.isClientRouting===void 0,V,{onlyOnce:!0,showStackTrace:!0}),n.isClientRouting=!0,n.checkSingleInstance=!0,D()}function Q(){v().instances.push(A),D()}function m(e,n,{onlyOnce:t,showStackTrace:o}){const r=v();if(e)return;const s=`[Vike][Warning] ${n}`;{const{alreadyLogged:i}=r,c=s;if(i.has(c))return;i.add(c)}console.warn(o?new Error(s):s)}function X(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function M(e,n){const t=new Error(e);return X()&&(t.stack=ee(t.stack,n)),t}function ee(e,n){if(!e)return e;const t=te(e);let o=0;return t.filter(s=>s.includes(" (internal/")||s.includes(" (node:internal")?!1:o<n&&ne(s)?(o++,!1):!0).join(`
`)}function ne(e){return e.startsWith("    at ")}function te(e){return e.split(/\r?\n/)}function oe(e){return u.bold(u.yellow(e))}function re(e){return u.bold(u.red(e))}function se(e){return u.yellow(e)}const l=$("utils/assert.ts",{alreadyLogged:new Set});Q();const ie="[vike]",ce=`[vike@${A}]`,ae="Bug";function a(e,n){if(e)return;const t=(()=>{if(!n)return null;const i=typeof n=="string"?n:JSON.stringify(n);return u.dim(`Debug for maintainers (you can ignore this): ${i}`)})();let r=[`You stumbled upon a Vike bug. Go to ${u.underline("https://github.com/vikejs/vike/issues/new?template=bug.yml")} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,t].filter(Boolean).join(" ");r=w(r,ae,!0);const s=O(r);throw l.onBeforeLog?.(),l.onBeforeErr?.(s),s}function p(e,n,{showStackTrace:t,exitOnError:o}={}){if(e)return;t=t||l.alwaysShowStackTrace,n=w(n,"Wrong Usage");const r=O(n);if(l.onBeforeLog?.(),l.onBeforeErr?.(r),o)console.error(t?r:n),process.exit(1);else throw r}function ue(e){return e=w(e,"Error"),O(e)}function C(e,n,{onlyOnce:t,showStackTrace:o}){if(e)return;if(o=o||l.alwaysShowStackTrace,t){const{alreadyLogged:s}=l,i=t===!0?n:t;if(s.has(i))return;s.add(i)}const r=w(n,"Warning");if(l.onBeforeLog?.(),o){const s=O(r);l.onBeforeErr?.(s),console.warn(s)}else console.warn(r)}function Re(e,n,{onlyOnce:t}){n=w(n,null);{const{alreadyLogged:o}=l,r=n;if(o.has(r))return;o.add(r)}l.onBeforeLog?.(),console.log(n)}function w(e,n,t=!1){const o=ge(t),r=fe(n),s=le(e);return l.addTagsDev?`${l.addTagsDev(o,r)}${s}${e}`:`${`${o}${r}`}${s}${e}`}function le(e){return e.startsWith("[")?"":" "}function fe(e){if(!e)return"";let n=`[${e}]`;return e==="Warning"?n=se(n):n=re(n),n}function ge(e=!1){return oe(e?ce:ie)}function Ae(){l.alwaysShowStackTrace=!0}function O(e){const n=M(e,3);return l.addTagsDev&&(n.stack=n.stack?.replace(/^Error:\s*/,"")),n}function Be(e,n,t){n&&(t||a(!n._isOriginalObject),Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)))}function de(e){return e instanceof Function||typeof e=="function"}function P(e){return typeof e=="object"&&e!==null}function he(){return typeof window<"u"&&typeof window.scrollY=="number"}function _(e){return Array.isArray(e)}function be(e,n){return e.toLowerCase()<n.toLowerCase()?-1:e.toLowerCase()>n.toLowerCase()?1:0}function ke(e,n){const t=Object.getOwnPropertyDescriptor(e,n);return!!t&&!("value"in t)&&!!t.get}function pe(e){return typeof e=="string"&&ye(e)?`.${e}`:`[${JSON.stringify(e)}]`}function ye(e){return/^[a-z0-9\$_]+$/i.test(e)}function L(e){const n=e/1e3;if(n<120){const t=H(n);return`${t} second${I(t)}`}{const t=n/60,o=H(t);return`${o} minute${I(o)}`}}function H(e){let n=e.toFixed(1);return n.endsWith(".0")&&(n=n.slice(0,-2)),n}function I(e){return e==="1"?"":"s"}function we(e){me(e)}function me(e){if(e.is404===void 0||e.is404===null)return;const n=e.pageProps||{};if(!P(n)){C(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}n.is404=n.is404||e.is404,e.pageProps=n}const Pe="__VIKE__NOT_SERIALIZABLE__";function x(e,n,t,o){return new Proxy(e,{get:(r,s)=>Te(s,e,n,t,o)})}function Te(e,...n){const[t,o,r,s]=n,i=String(e);if(e==="_isProxyObject")return!0;if(e==="dangerouslyUseInternals")return n[2]=!0,x(...n);if(e==="_originalObject")return t;if(s&&!(e in t))return s(e);const c=t[e];return $e(i,c,o),c}function $e(e,n,t){if(n!==Pe)return;const o=pe(e);a(he()),p(!1,`Can't access ${t}${o} on the client side. Because it can't be serialized, see server logs.`)}function ve(e){return a(e._isOriginalObject),x(e,"globalContext")}function Oe(e){a(!e._isProxyObject),a(!e.globalContext),a(e._isOriginalObject),we(e),"_pageId"in e||Object.defineProperty(e,"_pageId",{get(){return C(!1,"pageContext._pageId has been renamed to pageContext.pageId",{showStackTrace:!0,onlyOnce:!0}),e.pageId},enumerable:!1}),Se(e);const n=ve(e._globalContext);return x(e,"pageContext",!0,o=>{if(o==="globalContext")return n;if(o in n)return n[o]})}function Se(e){let n=Object.getOwnPropertyDescriptors(e);for(const t of Object.keys(e))delete e[t];n=Object.fromEntries(Object.entries(n).sort(([t],[o])=>be(t,o))),Object.defineProperties(e,n)}function Ve(e){["urlPathname","urlParsed","url","pageExports"].forEach(n=>{e.prop&&a(ke(e,n))})}function De(e,n,t=o=>o){if(a(e.length>0),e.length===1)return t(e[0]);const o=e.slice(0,e.length-1),r=e[e.length-1],s=e.length>2?",":"";return o.map(t).join(", ")+`${s} ${n} `+t(r)}const je="modulepreload",Ee=function(e){return"/"+e},W={},Ue=function(n,t,o){let r=Promise.resolve();if(t&&t.length>0){let i=function(f){return Promise.all(f.map(b=>Promise.resolve(b).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),g=c?.nonce||c?.getAttribute("nonce");r=i(t.map(f=>{if(f=Ee(f),f in W)return;W[f]=!0;const b=f.endsWith(".css"),k=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${k}`))return;const d=document.createElement("link");if(d.rel=b?"stylesheet":je,b||(d.as="script"),d.crossOrigin="",d.href=f,g&&d.setAttribute("nonce",g),document.head.appendChild(d),b)return new Promise((h,j)=>{d.addEventListener("load",h),d.addEventListener("error",()=>j(Error(`Unable to preload CSS for ${f}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return n().catch(s)})};function Ge(e,n){const t=n.find(o=>o.pageId===e);return a(n.length>0),a(t),t}function _e(e){if(!e||_(e)||e.definedBy)return null;const{filePathToShowToUser:n}=e;return a(n),n}function U(e){const n=_e(e);return a(n),n}const Ce=$("hooks/getHook.ts",{});function ze(e,n){if(!(n in e.exports))return null;const{hooksTimeout:t}=e.config,o=z(t,n),r=e.exports[n];if(r===null)return null;const s=e.exportsAll[n][0];a(s.exportValue===r);const i=s.filePath;return a(i),S(r,n,i,o)}function xe(e,n){const{hooksTimeout:t}=n.config,o=z(t,e),r=[];return n.exportsAll[e]?.forEach(s=>{const i=s.exportValue;if(i===null)return;const c=s.filePath;a(c),r.push(S(i,e,c,o))}),r}function qe(e,n){const t=e.configValues[n];if(!t?.value)return null;const{hookFn:o,hookFilePath:r}=Le(t),s=G(n);return S(o,n,r,s)}function Fe(e,n){const t=e.configValues[n];if(!t?.value)return[];const o=t.value;return a(_(o)),o.map((r,s)=>{const i=r,c=G(n);a(_(t.definedAtData));const g=U(t.definedAtData[s]);return S(i,n,g,c)})}function G(e){return q(e)}function S(e,n,t,o){return a(t),He(e,{hookName:n,hookFilePath:t}),{hookFn:e,hookName:n,hookFilePath:t,hookTimeout:o}}function Le(e){const n=e.value;a(n);const t=U(e.definedAtData);return{hookFn:n,hookFilePath:t}}function He(e,{hookName:n,hookFilePath:t}){a(n&&t),a(!n.endsWith(")")),a(!t.endsWith(" ")),p(de(e),`Hook ${n}() defined by ${t} should be a function`)}function z(e,n){const t=Ie(e);if(t===!1)return{error:!1,warning:!1};const o=t[n],r=q(n);return o?.error!==void 0&&(r.error=o.error),o?.warning!==void 0&&(r.warning=o.warning),r}function Ie(e){if(e===void 0)return{};if(e===!1)return!1;p(P(e),`Setting ${u.cyan("hooksTimeout")} should be ${u.cyan("false")} or an object`);const n={};return Object.entries(e).forEach(([t,o])=>{if(o===!1){n[t]={error:!1,warning:!1};return}p(P(o),`Setting ${u.cyan(`hooksTimeout.${t}`)} should be ${u.cyan("false")} or an object`);const[r,s]=["error","warning"].map(i=>{const c=o[i];if(c===void 0||c===!1)return c;const g=`Setting ${u.cyan(`hooksTimeout.${t}.${i}`)} should be`;return p(typeof c=="number",`${g} ${u.cyan("false")} or a number`),p(c>0,`${g} a positive number`),c});n[t]={error:r,warning:s}}),n}function q(e){return e==="onBeforeRoute"?{error:5*1e3,warning:1*1e3}:Ce.isPrerendering?{error:120*1e3,warning:30*1e3}:(a(!e.toLowerCase().includes("prerender")),{error:30*1e3,warning:4*1e3})}const T=$("utils/execHook.ts",{userHookErrors:new WeakMap,pageContext:null});async function Je(e,n,t){const o=xe(e,n);return await J(o,n,t)}async function Ne(e,n,t,o,r){const s=Fe(n,e),i=r(o);await Promise.all(s.map(async c=>{await N(()=>c.hookFn(i),c,t)}))}async function J(e,n,t){if(!e.length)return[];const o=t(n);return await Promise.all(e.map(async s=>{const i=await N(()=>s.hookFn(o),s,o);return{...s,hookReturn:i}}))}async function Ke(e,n,t){const o=await J([e],n,t),{hookReturn:r}=o[0];p(r===void 0,`The ${e.hookName}() hook defined by ${e.hookFilePath} isn't allowed to return a value`)}function N(e,n,t){const{hookName:o,hookFilePath:r,hookTimeout:{error:s,warning:i}}=n;let c,g;const f=new Promise((h,j)=>{c=E=>{b(),h(E)},g=E=>{b(),j(E)}}),b=()=>{k&&clearTimeout(k),d&&clearTimeout(d)},k=R(i)&&setTimeout(()=>{C(!1,`The ${o}() hook defined by ${r} is slow: it's taking more than ${L(i)} (https://vike.dev/hooksTimeout)`,{onlyOnce:!1})},i),d=R(s)&&setTimeout(()=>{const h=ue(`The ${o}() hook defined by ${r} timed out: it didn't finish after ${L(s)} (https://vike.dev/hooksTimeout)`);g(h)},s);return(async()=>{try{F(t);const h=await e();c(h)}catch(h){P(h)&&T.userHookErrors.set(h,{hookName:o,hookFilePath:r}),g(h)}})(),f}function Ye(e,n,t){const o=t(n);return F(o),{hookReturn:e.hookFn(o)}}function R(e){return!!e&&e!==1/0}function Ze(){const{pageContext:e}=T;return e?e._isProxyObject?e:Oe(e):null}function Qe(e){F(e)}function F(e){T.pageContext=e,Promise.resolve().then(()=>{T.pageContext=null})}export{Fe as A,Ne as B,ve as C,Ye as D,qe as E,Re as F,xe as G,J as H,We as I,Ue as _,Ve as a,a as b,_ as c,de as d,he as e,u as f,p as g,X as h,P as i,De as j,$ as k,Ze as l,Qe as m,L as n,Be as o,Oe as p,C as q,ze as r,Ae as s,Ke as t,q as u,K as v,ue as w,Ge as x,Je as y,_e as z};
